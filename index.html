<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Plant Nutrient Deficiency Helper</title>
  <style>
    body {
      font-family: 'Trebuchet MS', sans-serif;
      background: linear-gradient(#e0f7e9, #f7fff3);
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background: #3b873e;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 1.8em;
      border-bottom: 5px solid #2a5d2c;
    }
    main {
      max-width: 950px;
      margin: 30px auto;
      padding: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      color: #3b873e;
    }
    select, button {
      padding: 10px;
      margin: 10px 0;
      font-size: 1em;
      border-radius: 10px;
      border: 2px solid #3b873e;
    }
    button {
      background: #3b873e;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #2a5d2c;
    }
    .checkboxes {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 10px 0;
    }
    label {
      background: #f2fdf2;
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .severity {
      margin-left: 10px;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background: #eafbea;
      border-left: 5px solid #3b873e;
      border-radius: 10px;
    }
    .nutrient {
      color: #2a5d2c;
      text-decoration: underline;
      cursor: pointer;
    }
    footer {
      text-align: center;
      padding: 15px;
      background: #3b873e;
      color: white;
      margin-top: 30px;
      border-top: 5px solid #2a5d2c;
    }
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 2px solid #3b873e;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      z-index: 1000;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
    .popup button {
      margin-top: 10px;
      background: #3b873e;
      border: none;
    }
  </style>
</head>
<body>
  <header>
    ðŸŒ± Plant Nutrient Deficiency Helper ðŸŒ¿
  </header>
  <main>
    <h2>Step 1: Choose Plant Type</h2>
    <select id="plantType">
      <option value="">-- Select a plant type --</option>
      <option value="tree">Tree</option>
      <option value="herb">Herb</option>
      <option value="crop">Crop</option>
      <option value="flower">Flower</option>
    </select>

    <h2>Step 2: Select Symptoms (and severity)</h2>
    <div class="checkboxes">
      <label><input type="checkbox" value="yellowLeaves"> Yellowing of older leaves 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="stuntedGrowth"> Stunted growth 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="purpleLeaves"> Purplish leaves 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="brownEdges"> Brown leaf edges 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="weakStem"> Weak / thin stems 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="spots"> Interveinal leaf spots 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="newLeavesYellow"> New leaves yellowing first 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="curledLeaves"> Curling or distorted leaves 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="poorFlowering"> Poor flowering / fruit set 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="necrosis"> Necrosis (dead tissue patches) 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="leafDrop"> Premature leaf drop 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
      <label><input type="checkbox" value="thinRoots"> Poor root growth 
        <select class="severity"><option>Mild</option><option>Medium</option><option>Severe</option></select>
      </label>
    </div>

    <br>
    <button onclick="diagnose()">Check Deficiency</button>
    <button onclick="downloadReport()">Download Diagnosis (PDF)</button>

    <div id="output" class="result" style="display:none;"></div>
  </main>

  <footer>
    ðŸŒ» Made for Farmers | School Project Â© 2025
  </footer>

  <div id="popup" class="popup">
    <div id="popupContent"></div>
    <button onclick="closePopup()">Close</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const deficiencyData = {
      yellowLeaves: { 
        nutrient: "Nitrogen (N)", 
        organic: "Apply compost, manure, or grow legume cover crops.",
        synthetic: "Use urea or ammonium nitrate.",
        info: "Nitrogen is vital for leafy growth and chlorophyll."
      },
      stuntedGrowth: { 
        nutrient: "Phosphorus (P)", 
        organic: "Bone meal, rock phosphate, compost rich in P.",
        synthetic: "Apply superphosphate fertilizer.",
        info: "Phosphorus supports root growth, flowering, and energy transfer."
      },
      purpleLeaves: { 
        nutrient: "Phosphorus (P)", 
        organic: "Bone meal, manure.",
        synthetic: "Superphosphate fertilizer.",
        info: "Deficiency often causes purplish older leaves."
      },
      brownEdges: { 
        nutrient: "Potassium (K)", 
        organic: "Banana peel compost, wood ash, kelp meal.",
        synthetic: "Potassium sulfate or muriate of potash.",
        info: "Potassium strengthens plants and improves water regulation."
      },
      weakStem: {
        nutrient: "Calcium (Ca)",
        organic: "Crushed eggshells, lime, gypsum.",
        synthetic: "Calcium nitrate fertilizer.",
        info: "Calcium strengthens stems, roots, and cell walls."
      },
      spots: {
        nutrient: "Magnesium (Mg)",
        organic: "Epsom salt (magnesium sulfate) in water, compost.",
        synthetic: "Magnesium sulfate fertilizer.",
        info: "Magnesium is part of chlorophyll and prevents interveinal chlorosis."
      },
      necrosis: {
        nutrient: "Sulfur (S)",
        organic: "Elemental sulfur, gypsum, compost rich in S.",
        synthetic: "Ammonium sulfate fertilizer.",
        info: "Sulfur is important for protein formation and enzymes."
      },
      newLeavesYellow: {
        nutrient: "Iron (Fe)",
        organic: "Compost, foliar spray with chelated iron.",
        synthetic: "Iron sulfate or chelated Fe solutions.",
        info: "Iron deficiency causes chlorosis in young leaves."
      },
      interveinalYellowing: {
        nutrient: "Manganese (Mn)",
        organic: "Seaweed extract, compost tea.",
        synthetic: "Manganese sulfate spray.",
        info: "Manganese helps photosynthesis and enzyme activation."
      },
      poorFlowering: {
        nutrient: "Zinc (Zn)",
        organic: "Compost, kelp, manure.",
        synthetic: "Zinc sulfate spray.",
        info: "Zinc regulates growth hormones and flower/fruit formation."
      },
      leafDrop: {
        nutrient: "Copper (Cu)",
        organic: "Compost with trace minerals, manure.",
        synthetic: "Copper sulfate spray.",
        info: "Copper is essential for enzyme systems and lignin synthesis."
      },
      curledLeaves: {
        nutrient: "Boron (B)",
        organic: "Borax in very small amounts, compost with boron.",
        synthetic: "Boric acid solutions.",
        info: "Boron is important for cell walls, flowers, and fruit."
      },
      thinRoots: {
        nutrient: "Molybdenum (Mo)",
        organic: "Legume rotations, compost.",
        synthetic: "Ammonium molybdate.",
        info: "Molybdenum helps plants use nitrogen effectively."
      },
      wilting: {
        nutrient: "Chlorine (Cl)",
        organic: "Seaweed extract, manure.",
        synthetic: "Potassium chloride fertilizer.",
        info: "Chlorine aids water regulation and photosynthesis."
      },
      poorLegumeGrowth: {
        nutrient: "Nickel (Ni)",
        organic: "Trace amounts in manure, compost.",
        synthetic: "Nickel sulfate (rare).",
        info: "Nickel is needed in very small amounts for legumes."
      }
    };

    function diagnose() {
      const plant = document.getElementById('plantType').value;
      const checkboxes = document.querySelectorAll('.checkboxes label');
      const output = document.getElementById('output');

      if (!plant) {
        output.style.display = "block";
        output.innerHTML = "ðŸŒ± Please select a plant type and at least one symptom.";
        return;
      }

      let results = [];
      checkboxes.forEach(label => {
        const cb = label.querySelector('input');
        const sev = label.querySelector('.severity').value;
        if (cb.checked && deficiencyData[cb.value]) {
          const info = deficiencyData[cb.value];
          results.push(`<li>
            <span class="nutrient" onclick="showInfo('${cb.value}')"><strong>${info.nutrient}</strong></span> 
            (${sev})<br>
            ðŸŒ¿ Organic: ${info.organic}<br>
            ðŸ§ª Synthetic: ${info.synthetic}
          </li>`);
        }
      });

      if (results.length === 0) {
        output.style.display = "block";
        output.innerHTML = "ðŸŒ± Please select at least one symptom.";
        return;
      }

      // Example combo logic
      if (document.querySelector('input[value="yellowLeaves"]').checked &&
          document.querySelector('input[value="stuntedGrowth"]').checked) {
        results.push("<li><em>Combo: Nitrogen + Phosphorus deficiency likely together.</em></li>");
      }

      output.style.display = "block";
      output.innerHTML = `
        <strong>Plant Type:</strong> ${plant}<br><br>
        <strong>Possible Deficiencies:</strong>
        <ul>${results.join("")}</ul>
      `;
    }

    function showInfo(symptom) {
      const popup = document.getElementById('popup');
      const content = document.getElementById('popupContent');
      const data = deficiencyData[symptom];
      content.innerHTML = `<h3>${data.nutrient}</h3><p>${data.info}</p>`;
      popup.style.display = "block";
    }

    function closePopup() {
      document.getElementById('popup').style.display = "none";
    }

    function downloadReport() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text("Plant Nutrient Deficiency Diagnosis", 10, 10);
      doc.text(document.getElementById('output').innerText, 10, 20);
      doc.save("diagnosis.pdf");
    }
  </script>
</body>
</html>

